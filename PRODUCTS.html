

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>&lt;no title&gt; &mdash; satmo 0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="satmo 0.1 documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> satmo
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Users Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/index.html">satmo package</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="autodoc.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="autodoc.html#building-the-doc">Building the doc</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">satmo</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>&lt;no title&gt;</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/PRODUCTS.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p># This document provides a brief overview of the products generated by and stored on the system</p>
<p>## Spatial considerations</p>
<p>Similarly to the previous version of the system, the area covered stretches from South to North between 3 and 33 degrees and from West to East between -122 and -72 degrees.</p>
<p>The number of pixels covering the areas for the various spatial resolutions (250, 500 and 1000 m) will depend on the Coordinate Reference System (CRS) chosen for the output (2880x4800 at 1km resolution with a plate caree CRS)</p>
<p>Plate caree appears to be the standard projection of the ocean color community. This remains an open consideration that requires further assessment considering the requirements of both web visualization and analysis.</p>
<p>## Intermediary Vs Final</p>
<p>Final products are defined by biophysical variables whose values have a direct biological/ecological/analytical interest (ocean color products, Sea Surface Temperature, etc). On the contrary, intermediary products do not represent any direct biologically meaningful biophysical variable (e.g.: reflectance), but are essential to compute final products. Intermediary products would for instance not be made available to users or via ftp or visible on the web visualization platform.</p>
<p>## Product list</p>
<p>### <cite>L1A</cite></p>
<p>#### Description</p>
<p>L1A products are what we consider the raw data. They are downloaded directly from the ocean color DAAC for each sensor independently. They are organized in 5min granules.</p>
<p>#### Program used</p>
<p>In most cases these files are downloaded, with python. The spatio-temporal query is either handled using the <cite>satmo.query</cite> module (when downloading archive data) or by using a OBPG data subscription (for near real time data).</p>
<p>#### Naming convention</p>
<p>Example: <cite>V2012005001200.L1A_SNPP.nc</cite></p>
<p>#### Directory structure</p>
<p><cite>sensor/L1A/YYYY/DDD/filename</cite></p>
<p>#### Persistence</p>
<p>Files are deleted as soon as extracted L1A products are produced, which may happen immediately after download or later on.</p>
<p>#### Note</p>
<p>Spatial query should be done with an extent that is smaller then the satmo area extent, to ensure that data do intersect with extraction extent when running <cite>l1aextract_&lt;sensor&gt;</cite> (see below). Otherwise the program crashes.</p>
<p>—</p>
<p>### <cite>L1A sub</cite> (extracted <cite>L1A</cite>)</p>
<p>#### Description</p>
<p>Extracted L1A products have the same characteristics than non extracted L1A products. The difference is that they result from a spatial extraction of the data to the SATMO project area performed to reduce volumes of data stored.</p>
<p>#### Program used</p>
<p><cite>l1aextract_&lt;sensor&gt;</cite> called via multilevel processor.</p>
<p>par file:</p>
<p><code class="docutils literal"><span class="pre">`sh</span>
<span class="pre">[main]</span>
<span class="pre">ifile=file1.L1A,file2.L1A</span>
<span class="pre">#overwrite=1</span>
<span class="pre">[l1aextract_{{sensor}}]</span>
<span class="pre">SWlon=</span> <span class="pre">{{west}}</span>
<span class="pre">SWlat=</span> <span class="pre">{{south}}</span>
<span class="pre">NElon=</span> <span class="pre">{{east}}</span>
<span class="pre">NElat=</span> <span class="pre">{{north}}</span>
<span class="pre">`</span></code></p>
<p>Using <cite>satmo</cite>:</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>python
import satmo</p>
<p>ext = satmo.extractJob(‘path/to/dir’)
ext.extract(33, 3, -72, -122)
ext.compress()
ext.clean()
<a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
<p>#### Naming convention</p>
<p>Example: <cite>V2012005001200.L1A_SNPP.nc.sub</cite></p>
<p>#### Directory structure</p>
<p>File are stored in the same folders than L1A data, they ultimately replace them entirely. Therefore <cite>sensor/L1A/YYYY/DDD/filename</cite>.</p>
<p>#### Persistence</p>
<p>Data must be kept</p>
<p>—</p>
<p>### <cite>L1B</cite></p>
<p>Intermediate product of L2 processing, not stored or kept.</p>
<p>—</p>
<p>### <cite>GEO</cite> files</p>
<p>Intermediate product of L2 processing, not stored or kept.</p>
<p>—</p>
<p>### <cite>L2</cite></p>
<p>#### Description</p>
<p>Atmospherically corrected data at the original sensor resolution. Includes reflectances (different for every sensor), PAR, SST, SST4, NSST, all in one file. Going from <cite>L1A</cite> to <cite>L2</cite> is the most computationally expensive step, it is therefore only once. Ancillary data is required, fetched automatically by the <cite>multilevel_processor.py</cite> script. When processing in near real time mode, these data are often not available, a consolidation re-processing is therefore required once ancillary data become available.</p>
<p>#### Program used</p>
<p><cite>l2gen</cite> via the <cite>multilevel_processor.py</cite>. The number of output file equals the number of input (does not mosaic files).</p>
<p>Example par file for modis (day only):</p>
<p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a>sh
[main]
ifile=file1.L1A.sub,file2.L1A.sub
use_nrt_anc=1
overwrite=1 # or 0 if</p>
<p>[l2gen]
l2prod=Rrs_412 Rrs_443 Rrs_469 Rrs_488 Rrs_531 Rrs_547 Rrs_555 Rrs_645 Rrs_667 Rrs_678 Rrs_748 Rrs_859 Rrs_869 Rrs_1240 Rrs_1640 Rrs_2130 sst sst4 par ipar
<a href="#id13"><span class="problematic" id="id14">``</span></a><a href="#id15"><span class="problematic" id="id16">`</span></a></p>
<p>Using <cite>satmo</cite>:</p>
<p>At the moment it is not possible to produce L2 data without going all the way to <cite>l3map</cite>. Nevertheless L2 data is kept and stored in a separate folder</p>
<p><a href="#id17"><span class="problematic" id="id18">``</span></a><a href="#id19"><span class="problematic" id="id20">`</span></a>python
import satmo</p>
<p># Only includes non optional arguments
l3m = satmo.l3map(‘/path/to/dir’)
l3m.execute(33, 3, -72, -122, suite = [‘RRS’, ‘SST’, ‘SST4’, ‘PAR’])
l3m.clean()
<a href="#id21"><span class="problematic" id="id22">``</span></a><a href="#id23"><span class="problematic" id="id24">`</span></a></p>
<p>The processing above will result in as many L2 files as there were L1A inputs, as well as four <cite>L3m</cite> files (one per suite). <cite>L3b</cite>, <cite>L1B</cite> and <cite>GEO</cite> intermediary files are not kept.</p>
<p>#### Naming convention</p>
<p>Example: <cite>V2014004000000.L2_SNPP_SST.nc</cite></p>
<p>#### Directory structure</p>
<p><cite>sensor/L2/YYYY/DDD/filename</cite></p>
<p>#### Persistence</p>
<p>Because processing is so computationnaly expensive, data must be kept. However, one special case concerns the near real time L2 products which should be overwritten a few day after the initial processing triggered by availability of ancillary data.</p>
<p>—</p>
<p>### <cite>L3b</cite></p>
<p>#### Description</p>
<p><cite>L3b</cite> (level 3 binned) are product suites spatially aggregated to equal area (usually 1km2) bins. Bad quality pixels are not included (filtered by quality flags specific to every suite). These are not gridded files.</p>
<p>#### Program used</p>
<p>MOdis RRS example.</p>
<p><cite>l2bin infile=L2_filelist ofile=filename.L3b_DAY_RRS l3bprod=Rrs_412,Rrs_443,Rrs_469,Rrs_488,Rrs_531,Rrs_547,Rrs_555,Rrs_645,Rrs_667,Rrs_678,Rrs_748,Rrs_859,Rrs_869,Rrs_1240,Rrs_1640,Rrs_2130 resolve=1 night=0</cite></p>
<p>For <cite>satmo</cite> implementation, refer to <cite>L2</cite> section.</p>
<p>#### Naming convention</p>
<p>Example: <cite>T2014004.L3b_DAY_RRS</cite></p>
<p>#### Directory structure</p>
<p><cite>sensor/L3b/YYYY/filename</cite></p>
<p>#### Persistence</p>
<p>Files are deleted immediately after processing</p>
<p>—</p>
<p>### <cite>L3m</cite></p>
<p>#### Description</p>
<p><cite>L3m</cite> (level 3 mapped) are warped versions of <cite>L3b</cite>. They are projected to a desired projection and extent.</p>
<p>#### Program used</p>
<p>Modis RRS example:</p>
<p><cite>l3mapgen ifile=filename.L3b_DAY_RRS ofile=filename.L3m_DAY_RRS.nc resolution=1km south=3 north=33 west=-122 east=-72 projection=”+proj=laea +lat_0=18 +lon_0=-97”</cite></p>
<p>For <cite>satmo</cite> implementation, refer to <cite>L2</cite> section.</p>
<p>#### Naming convention</p>
<p>Example: <cite>T2014004.L3m_DAY_RRS.nc</cite></p>
<p>#### Directory structure</p>
<p><cite>sensor/L3m/YYYY/filename</cite></p>
<p>#### Persistence</p>
<p>Must be kept (end of pre-processing chain). Overwritten during consolidation a few days after near real time processing.</p>
<p>—</p>
<p>### Ocean color products</p>
<p>The table below gives an overview of the ‘final’ product that will be generated from MODIS sensors by the SATMO system.</p>
<div class="line-block">
<div class="line">Abr    |                    Name                   |     ref     | Easy | Max Res | Input bands | Input type |</div>
</div>
<p><a href="#id25"><span class="problematic" id="id26">|----------|</span></a>——————————————-<a href="#id27"><span class="problematic" id="id28">|-------------|</span></a>——<a href="#id29"><span class="problematic" id="id30">|---------|</span></a>————-<a href="#id31"><span class="problematic" id="id32">|------------|</span></a>
| Chl_OC3 | chlorophyll band-ratio model oc3          |             | Yes  | 1000    | 443/488 547 | Rrs        |
| FLH      | fluorescence line height                  |             | Yes  | 1000    | 667 678 748 | nLw        |
| TSM      | total suspended matter concentration      |             |      |         |             |            |
| Kd(490)  | diffuse attenuation coefficient at 490 nm |             | Yes  | 1000    | 488 547     | Rrs        |
| PAR      | Photosynthetically Available Radiation    |             | No   | 500?    |             |            |
| iPAR     | Instantaneous PAR                         |             | No   | 500?    |             |            |
| SST      | Sea Surface Temperature                   |             |      | 1000    |             |            |
| NSST     | Night Sea Surface Temperature             |             |      | 1000    |             |            |
| SST4     | Short Waves Sea Surface Temperature       |             |      | 1000    |             |            |
| FAI      | Floating Algae Index                      |             |      | 250     |             |            |
| AFAI     | Alternative Floating Algae Index          |             |      | 1000    |             |            |
| MCI      | Maximum chlorophyll index                 |             |      |         |             |            |
| NDVI     | Normalized Difference Vegetation Index    |             |      | 250     |             |            |
| NDAI     | Normalized Difference Algae index         |             |      |         |             |            |
| SAI      | scaled algae index                        | Garcia 2013 |      | 250     |             | NDVI/FAI   |
|          |                                           |             |      |         |             |            |</p>
<ul class="simple">
<li>Abr: Abreviation</li>
<li>Easy: Is it easy to compute (using numpy)</li>
<li>Max res: Maximum achievable resolution for MODIS</li>
<li>Input type: Whether spectral bands should be reflectance (Rrs), Rayleigh corrected (Rrc, or Rhos in seadas), Water leaving radiances (nLw)</li>
</ul>
<p>### Composite products and climatologies</p>
<p>Compositing times can be:</p>
<ul class="simple">
<li>Daily</li>
<li>8 days (45 composites per year + 5 days remainder on a non leap year)</li>
<li>16 days (22 composites per year + 13 days remainder on a non leap year)</li>
<li>Monthly</li>
</ul>
<p>These composites and the associated climatologies are only computed for the ocean color and temperature products defined in the previous section; not for reflectance data.</p>
<p>### Anomalies</p>
<p>Anomalies are derived in near real time by confronting newly acquired data to climatologies.</p>
<p>### Additional variables</p>
<div class="line-block">
<div class="line">Product        | Source (technology) |                  Source (institution)                  |</div>
</div>
<p><a href="#id33"><span class="problematic" id="id34">|----------------------|</span></a>———————<a href="#id35"><span class="problematic" id="id36">|--------------------------------------------------------|</span></a>
| Ocean winds          |                     | See [nasa winds](<a class="reference external" href="https://winds.jpl.nasa.gov/">https://winds.jpl.nasa.gov/</a>)          |
| Salinity             | SMOS-MIRAS          | CATDS? ESA?                                            |
| (Dynamic) topography | OSTM/Jason-2        |                                                        |
| Ocean currents       |                     | [NOAA](<a class="reference external" href="https://www.nodc.noaa.gov/General/current.html">https://www.nodc.noaa.gov/General/current.html</a>) |
|                      |                     | [HYCOM](<a class="reference external" href="https://hycom.org/">https://hycom.org/</a>)                            |
|                      |                     |                                                        |</p>
<p>## Input data assessment</p>
<p>### Ocean color data sources</p>
<ul class="simple">
<li>MODIS Terra</li>
<li>MODIS Aqua</li>
<li>VIIRS NPP</li>
<li>SeaWIFS</li>
<li>Sentinel 3</li>
<li>MERIS</li>
</ul>
<p>### Spectral characteristics</p>
<p>Spectral characteristics of every sensor are listed below.</p>
<p>#### MODIS</p>
<div class="line-block">
<div class="line">Note  | Wavelength | Spatial resolution |</div>
</div>
<p><a href="#id37"><span class="problematic" id="id38">|---------|</span></a>————<a href="#id39"><span class="problematic" id="id40">|--------------------|</span></a>
|         |        645 |                250 |
|         |        859 |                250 |
|         |        469 |                500 |
|         |        555 |                500 |
|         |       1240 |                500 |
|         |       1640 |                500 |
|         |       2130 |                500 |
|         |        412 |               1000 |
|         |        443 |               1000 |
|         |        488 |               1000 |
|         |        531 |               1000 |
|         |        547 |               1000 |
|         |        667 |               1000 |
|         |        678 |               1000 |
| Aerosol |        748 |               1000 |
| Aerosol |        869 |               1000 |
|         |            |                    |</p>
<p>By default reflectance is produced ar 1km for all bands (see <cite>l2gen</cite>).</p>
<p>—</p>
<p>#### VIIRS</p>
<div class="line-block">
<div class="line">Note  | Wavelength | Spatial resolution |</div>
</div>
<p><a href="#id41"><span class="problematic" id="id42">|---------|</span></a>————<a href="#id43"><span class="problematic" id="id44">|--------------------|</span></a>
|         |        410 |                750 |
|         |        443 |                750 |
|         |        486 |                750 |
|         |        551 |                750 |
|         |        671 |                750 |
| Aerosol |        745 |                750 |
| Aerosol |        862 |                750 |
|         |       1238 |                750 |
|         |       1601 |                750 |
|         |       2257 |                750 |</p>
<p>VIIRS also contains a set of 350 m resolution bands, however, seadas does not currently allow surface reflectance processing from these bands.</p>
<p>—</p>
<p>#### Seawifs</p>
<div class="line-block">
<div class="line">Note  | Wavelength | Spatial resolution |</div>
</div>
<p><a href="#id45"><span class="problematic" id="id46">|---------|</span></a>————<a href="#id47"><span class="problematic" id="id48">|--------------------|</span></a>
|         |        412 |               1100 |
|         |        443 |               1100 |
|         |        490 |               1100 |
|         |        510 |               1100 |
|         |        555 |               1100 |
|         |        670 |               1100 |
| aerosol |        765 |               1100 |
| aerosol |        865 |               1100 |</p>
<p>—</p>
<p>#### MERIS</p>
<div class="line-block">
<div class="line">Note  | Wavelength | Spatial resolution |</div>
</div>
<p><a href="#id49"><span class="problematic" id="id50">|---------|</span></a>————<a href="#id51"><span class="problematic" id="id52">|--------------------|</span></a>
|         |        413 | 1040 x 1200        |
|         |        443 | 1040 x 1200        |
|         |        490 | 1040 x 1200        |
|         |        510 | 1040 x 1200        |
|         |        560 | 1040 x 1200        |
|         |        620 | 1040 x 1200        |
|         |        665 | 1040 x 1200        |
|         |        681 | 1040 x 1200        |
|         |        709 | 1040 x 1200        |
|         |        754 | 1040 x 1200        |
|         |        762 | 1040 x 1200        |
| aerosol |        779 | 1040 x 1200        |
| aerosol |        865 | 1040 x 1200        |
|         |        885 | 1040 x 1200        |
|         |        900 | 1040 x 1200        |</p>
<p>—</p>
<p>#### Sentinel 3</p>
<p>Spatial resolution: 300 m
[Spectral channels](<a class="reference external" href="https://sentinel.esa.int/web/sentinel/user-guides/sentinel-3-olci/resolutions/radiometric">https://sentinel.esa.int/web/sentinel/user-guides/sentinel-3-olci/resolutions/radiometric</a>)</p>
<p>—</p>
<p>#### Summary</p>
<p>All sensors have different spectral and spatial characteristics, the table below (in progress) attempts to unifies them for facilitated processing.</p>
<div class="line-block">
<div class="line">Name  | MODIS | VIIRS | MERIS | SeaWifs | Sentinel3 |</div>
</div>
<p><a href="#id53"><span class="problematic" id="id54">|--------|</span></a>——-<a href="#id55"><span class="problematic" id="id56">|-------|</span></a>——-<a href="#id57"><span class="problematic" id="id58">|---------|</span></a>———–|
| BLUE1  |   412 |   412 |       |         |           |
| BLUE2  |   443 |   445 |       |         |           |
| BLUE3  |   469 |       |       |         |           |
| BLUE4  |   488 |   488 |       |         |           |
| GREEN1 |   531 |       |       |         |           |
| GREEN2 |   551 |       |       |         |           |
| GREEN3 |   547 |   555 |       |         |           |
| RED1   |   645 |   640 |       |         |           |
| RED2   |   667 |   672 |       |         |           |
| RED3   |   678 |       |       |         |           |
| RED4   |   748 |   748 |       |         |           |
| NIR1   |   859 |       |       |         |           |
| NIR2   |   869 |   867 |       |         |           |
| SWIR1  |  1240 |  1240 |       |         |           |
| SWIR1  |  1640 |       |       |         |           |
| SWIR2  |  2130 |       |       |         |           |</p>
<p>References:</p>
<ul class="simple">
<li>[MODIS VIIRS spectral characteristics comparison](<a class="reference external" href="http://www.goes-r.gov/users/comet/npoess/multispectral_topics/rgb/media/graphics/viirs_ols_modis_table.gif">http://www.goes-r.gov/users/comet/npoess/multispectral_topics/rgb/media/graphics/viirs_ols_modis_table.gif</a>)</li>
<li>[MODIS VIIRS comparison](<a class="reference external" href="http://www.star.nesdis.noaa.gov/jpss/documents/meetings/2011/AMS_Seattle_2011/Poster/A-TRAIN%20%20Perf%20Cont%20%20MODIS%20Observa%20-%20Guenther%20-%20WPNB.pdf">http://www.star.nesdis.noaa.gov/jpss/documents/meetings/2011/AMS_Seattle_2011/Poster/A-TRAIN%20%20Perf%20Cont%20%20MODIS%20Observa%20-%20Guenther%20-%20WPNB.pdf</a>)</li>
</ul>
<p>### Quality control</p>
<p>TODO</p>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, CONABIO.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>