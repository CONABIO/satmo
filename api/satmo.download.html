

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>satmo.download module &mdash; satmo 0.2.4 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="satmo 0.2.4 documentation" href="../index.html"/>
        <link rel="up" title="satmo API" href="index.html"/>
        <link rel="next" title="satmo.errors module" href="satmo.errors.html"/>
        <link rel="prev" title="satmo.utils module" href="satmo.utils.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> satmo
          

          
          </a>

          
            
            
              <div class="version">
                0.2.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html#characteristics-of-the-satmo-system">Characteristics of the SATMO system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html#satmo-operating-modes">Satmo operating modes</a></li>
</ul>
<p class="caption"><span class="caption-text">User guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Using the command line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../variables.html">Adjusting default processing parameters and variables</a></li>
</ul>
<p class="caption"><span class="caption-text">Technical documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">satmo API</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#modules">Modules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="satmo.utils.html">satmo.utils module</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">satmo.download module</a></li>
<li class="toctree-l3"><a class="reference internal" href="satmo.errors.html">satmo.errors module</a></li>
<li class="toctree-l3"><a class="reference internal" href="satmo.geo.html">satmo.geo module</a></li>
<li class="toctree-l3"><a class="reference internal" href="satmo.global_variables.html">satmo.global_variables module</a></li>
<li class="toctree-l3"><a class="reference internal" href="satmo.preprocessors.html">satmo.preprocessors module</a></li>
<li class="toctree-l3"><a class="reference internal" href="satmo.processors.html">satmo.processors module</a></li>
<li class="toctree-l3"><a class="reference internal" href="satmo.query.html">satmo.query module</a></li>
<li class="toctree-l3"><a class="reference internal" href="satmo.visualization.html">satmo.visualization module</a></li>
<li class="toctree-l3"><a class="reference internal" href="satmo.wrappers.html">satmo.wrappers module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chains.html">Satmo processing chains</a></li>
</ul>
<p class="caption"><span class="caption-text">Installation and documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../autodoc.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../autodoc.html#building-the-doc">Building the doc</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">satmo</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">satmo API</a> &raquo;</li>
        
      <li>satmo.download module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/satmo.download.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-satmo.download">
<span id="satmo-download-module"></span><h1>satmo.download module<a class="headerlink" href="#module-satmo.download" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="satmo.download.download_file">
<code class="descclassname">satmo.download.</code><code class="descname">download_file</code><span class="sig-paren">(</span><em>url</em>, <em>write_dir</em>, <em>overwrite=False</em>, <em>check_integrity=False</em>, <em>timeout=15</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/download.html#download_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.download.download_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic file download function</p>
<p>Downloads a file from a URL, and write it to a user defined location.
The function will raise a ConnectionError (via requests) if a connection cannot be established
with the server (e.g.: network is down) and an HttpResourceNotAvailable if the file appear not to
exist on the server</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>url</strong> (<em>str</em>) – download url</li>
<li><strong>write_dir</strong> (<em>str</em>) – Host directory to which the data will be written</li>
<li><strong>overwrite</strong> (<em>bool</em>) – Should the file be overwritten if already existing on local host</li>
<li><strong>check_integrity</strong> (<em>bool</em>) – Only makes sense if overwrite is set to False (when updating the archive)</li>
<li><strong>timeout</strong> (<em>float</em>) – How long to wait (in seconds) for the server to send data before giving up and
raising a requests.ConnectionError</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The filename of the downloaded data</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satmo.download.download_robust">
<code class="descclassname">satmo.download.</code><code class="descname">download_robust</code><span class="sig-paren">(</span><em>url</em>, <em>base_dir</em>, <em>n_retries=5</em>, <em>pause_retries=10</em>, <em>overwrite=False</em>, <em>check_integrity=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/download.html#download_robust"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.download.download_robust" title="Permalink to this definition">¶</a></dt>
<dd><p>Robust download of a list of urls</p>
<p>Handles connection errors, optionally check for existing files and integrity
Suitable for real time use and for updating an archive without overwriting existing data</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>url</strong> (<em>str</em>) – Download url</li>
<li><strong>base_dir</strong> (<em>str</em>) – root of the archive tree on the host</li>
<li><strong>n_retries</strong> (<em>int</em>) – Number of retries when the download fails because of a ConnectionError</li>
<li><strong>pause_retries</strong> (<em>int</em>) – Duration (in seconds) between retries</li>
<li><strong>overwrite</strong> (<em>bool</em>) – Should existing files on the host be overwritten</li>
<li><strong>check_integrity</strong> (<em>bool</em>) – Only makes sense if overwrite is set to False (when updating the archive)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Boolean, True when successful, False otherwise</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satmo.download.download_to_tree">
<code class="descclassname">satmo.download.</code><code class="descname">download_to_tree</code><span class="sig-paren">(</span><em>url</em>, <em>base_dir</em>, <em>overwrite=False</em>, <em>check_integrity=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/download.html#download_to_tree"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.download.download_to_tree" title="Permalink to this definition">¶</a></dt>
<dd><p>Download an ocean product file and automatically write it to the right location</p>
<p>The idea is that the function immediately knows where to write the file
by parsing the filename (present in url)
Directories where data are downloaded do not need to exist before running the function
Similarly to download_file, the function will raise a ConnectionError (via requests) if a connection
cannot be established with the server (e.g.: network is down) and an HttpResourceNotAvailable
if the file appear not to exist on the server. It might be worth re-trying when catching requests.ConnectionError,
going to the next file is probably the best way if catching a HttpResourceNotAvailable</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>url</strong> (<em>str</em>) – download url</li>
<li><strong>base_dir</strong> (<em>str</em>) – root of the archive tree on the host</li>
<li><strong>overwrite</strong> (<em>bool</em>) – Should the file be overwritten if already existing on local host</li>
<li><strong>check_integrity</strong> (<em>bool</em>) – Only makes sense if overwrite is set to False (when updating the archive)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The filename of the downloaded file</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="satmo.errors.html" class="btn btn-neutral float-right" title="satmo.errors module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="satmo.utils.html" class="btn btn-neutral" title="satmo.utils module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, CONABIO.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.2.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>