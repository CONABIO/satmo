

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>satmo.utils module &mdash; satmo 0.2.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="satmo 0.2.2 documentation" href="../index.html"/>
        <link rel="up" title="satmo package" href="index.html"/>
        <link rel="next" title="satmo.download module" href="satmo.download.html"/>
        <link rel="prev" title="satmo package" href="index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> satmo
          

          
          </a>

          
            
            
              <div class="version">
                0.2.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command Line Users Guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">satmo package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">satmo.utils module</a></li>
<li class="toctree-l3"><a class="reference internal" href="satmo.download.html">satmo.download module</a></li>
<li class="toctree-l3"><a class="reference internal" href="satmo.errors.html">satmo.errors module</a></li>
<li class="toctree-l3"><a class="reference internal" href="satmo.geo.html">satmo.geo module</a></li>
<li class="toctree-l3"><a class="reference internal" href="satmo.global_variables.html">satmo.global_variables module</a></li>
<li class="toctree-l3"><a class="reference internal" href="satmo.preprocessors.html">satmo.preprocessors module</a></li>
<li class="toctree-l3"><a class="reference internal" href="satmo.processors.html">satmo.processors module</a></li>
<li class="toctree-l3"><a class="reference internal" href="satmo.query.html">satmo.query module</a></li>
<li class="toctree-l3"><a class="reference internal" href="satmo.visualization.html">satmo.visualization module</a></li>
<li class="toctree-l3"><a class="reference internal" href="satmo.wrappers.html">satmo.wrappers module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-satmo">Module contents</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../autodoc.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../autodoc.html#building-the-doc">Building the doc</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">satmo</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">satmo package</a> &raquo;</li>
        
      <li>satmo.utils module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/satmo.utils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-satmo.utils">
<span id="satmo-utils-module"></span><h1>satmo.utils module<a class="headerlink" href="#module-satmo.utils" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="satmo.utils.bit_pos_to_hex">
<code class="descclassname">satmo.utils.</code><code class="descname">bit_pos_to_hex</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/utils.html#bit_pos_to_hex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.utils.bit_pos_to_hex" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a list containing bit positions and returns the corresponding
integer</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<em>list</em>) – A list of bit position (e.g.: [0,3] for 1001, aka 9)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The integer corresponding to the list of bit position provided in the
list</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satmo.utils.file_finder">
<code class="descclassname">satmo.utils.</code><code class="descname">file_finder</code><span class="sig-paren">(</span><em>data_root</em>, <em>date</em>, <em>level</em>, <em>suite=None</em>, <em>variable=None</em>, <em>sensor_code=None</em>, <em>resolution=None</em>, <em>composite=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/utils.html#file_finder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.utils.file_finder" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds existing files on the system from meta information (date, level, variable, sensor_code, …)</p>
<p>Builds a glob pattern from the provided information and runs glob.glob on it. THis function is not fully generic, and so mostly
targeted at L1A, L2, and L3m file (no climatologies or anomalies). Example applications include:</p>
<blockquote>
<div><ul class="simple">
<li>list all L2 files required to produce a L3b binned product (don’t forget filtering using isDay() as well)</li>
<li>list all L3m files from a same date but from different sensors in order to produce cross sensor composites</li>
</ul>
</div></blockquote>
<dl class="docutils">
<dt>Required arguments differ depending on the level set. See list below:</dt>
<dd><ul class="first last simple">
<li>‘L1A’: data_root, date, level, (sensor_code)</li>
<li>‘L2’: data_root, date, level, suite, (sensor_code)</li>
<li>‘L3m’: data_root, date, level, suite, variable, (sensor_code), resolution, composite</li>
<li>‘L3b’: data_root, date, level, suite, (sdata_root, date, level, suite, (sensor_code), compositeensor_code), composite</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data_root</strong> (<em>str</em>) – Root of the data archive</li>
<li><strong>date</strong> (<em>str</em><em> or </em><em>datetime</em>) – Date of the directory to find</li>
<li><strong>level</strong> (<em>str</em>) – Data level</li>
<li><strong>suite</strong> (<em>str</em>) – Product suite (e.g. ‘OC’, ‘CHL’, ‘SST’)</li>
<li><strong>variable</strong> (<em>str</em>) – Product variable (e.g. ‘sst’, ‘chlor_a’)</li>
<li><strong>sensor_code</strong> (<em>str</em>) – Sensor code (e.g. ‘A’, ‘T’, ‘V’) of the files to query. If None (default), is replaced by * in a glob search</li>
<li><strong>resolution</strong> (<em>str</em>) – e.g. ‘1km’</li>
<li><strong>composite</strong> (<em>str</em>) – Composite period of the files to query</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A list of filenames (empty if no matches)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satmo.utils.filename_builder">
<code class="descclassname">satmo.utils.</code><code class="descname">filename_builder</code><span class="sig-paren">(</span><em>level</em>, <em>climatology=False</em>, <em>anomaly=False</em>, <em>full_path=False</em>, <em>data_root=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/utils.html#filename_builder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.utils.filename_builder" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility to build valid ocean color filenames for every level</p>
<p>Each level= chosen requires different kwargs.</p>
<p>‘L2’: filename and suite OR sensor_code, suite, date, and time</p>
<p>‘L3b’: filename, composite and suite OR sensor_code, date, composite, suite</p>
<p>‘L3m’ climatology: (date OR doy), composite, suite, variable, resolution, begin_year, end_year. If a date is provided, year does not matter</p>
<p>‘L3m’ anomaly: filename OR date, composite, suite, variable, resolution</p>
<p>‘L3m’: filename, composite, variable, resolution, (nc) OR date, sensor_code, suite, composite, variable, resolution, (nc)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>level</strong> (<em>str</em>) – the data level of the desired filename</li>
<li><strong>climatology</strong> (<em>bool</em>) – Does the filename correspond to climatology data</li>
<li><strong>anomaly</strong> (<em>bool</em>) – Does the filename correspond to anomaly data</li>
<li><strong>full_path</strong> (<em>bool</em>) – Should file path be computed (using path_builder)</li>
<li><strong>data_root</strong> (<em>str</em>) – To be used in combination with full_path = True, see path_builder()
doc for more details</li>
<li><strong>**kwargs</strong> – <p>level specific kwargs (See details section to know which kwargs are required for each chosen level):</p>
<p>filename (str): filename of the main input file used to produce the output (typically filename of a lower level file)</p>
<p>suite (str): product suite of the desired file name (e.g. OC, SST, SST4, IOP)</p>
<p>sensor_code (str): e.g.: ‘A’, ‘V’, ‘X’</p>
<dl class="docutils">
<dt>date (datetime.datetime or str). IN the case of climatologies the year is ignored so that ‘1970-05-01’ can</dt>
<dd>be specified for example</dd>
</dl>
<p>time (datetime.time): with hour, min, sec (e.g. datetime.time(12, 35, 0))</p>
<p>doy (str or int): Day of the year</p>
<p>composite (str): e.g. DAY, 8DAY, 16DAY, etc</p>
<p>variable (str)</p>
<p>resolution (str): e.g. ‘1km’</p>
<p>begin_year (int or str): for climatologies, see CONVENTIONS.md</p>
<p>end_year (int or str): for climatologies, see CONVENTIONS.md</p>
<dl class="docutils">
<dt>nc (bool): Should extension be ‘.nc’ (instead of ‘.tif’) (Only useful for L3m level, to distinguish between</dt>
<dd>tif files which are produced by e.g. custom compositing functions, and netcdf output of l3mapgen)</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>&gt; import satmo
&gt; from datetime import datetime, time
&gt;
&gt; satmo.filename_builder(‘L2’, filename = ‘T2001117063500.L1A_LAC.bz2’, suite = ‘OC’, full_path = True, data_root = ‘/export/isilon/datos2/satmo2_data’)
&gt; satmo.filename_builder(‘L2’, sensor_code = ‘T’, date = ‘1987-11-21’, time = time(6, 35, 0), suite = ‘OC’)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a syntactically correct ocean color filename</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satmo.utils.filename_parser">
<code class="descclassname">satmo.utils.</code><code class="descname">filename_parser</code><span class="sig-paren">(</span><em>filename</em>, <em>raiseError=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/utils.html#filename_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.utils.filename_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>File parser for ocean color products</p>
<p>Extract metadata information from a typical ocean color file name</p>
<dl class="docutils">
<dt>The parser will probably fail for the following products:</dt>
<dd><ul class="first last simple">
<li>L0</li>
<li>Sentinel 3</li>
<li>Meris for levels lower than L2</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> (<em>str</em>) – String containing an ocean color file filename</li>
<li><strong>raiseError</strong> (<em>bool</em>) – Behavior when no valid pattern is found.</li>
<li><strong>True</strong> (<em>default</em>) – Nones</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>A dictionary with the following keys:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sensor</span> <span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<span class="n">sensor_code</span> <span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<span class="n">date</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">)</span>
<span class="n">time</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">)</span>
<span class="n">year</span> <span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">month</span> <span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">doy</span> <span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">dom</span> <span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">level</span> <span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<span class="n">filename</span> <span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<span class="n">climatology</span> <span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
<span class="n">anomaly</span> <span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
<span class="n">resolution</span> <span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<span class="n">variable</span> <span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<span class="n">suite</span> <span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<span class="n">composite</span> <span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="p">:</span> <span class="n">DAY</span><span class="p">,</span> <span class="mi">8</span><span class="n">DAY</span><span class="p">,</span> <span class="o">...</span>
<span class="n">begin_year</span> <span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="p">(</span><span class="k">for</span> <span class="n">climatologies</span> <span class="n">only</span><span class="p">)</span>
<span class="n">end_year</span> <span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="p">(</span><span class="k">for</span> <span class="n">climatologies</span> <span class="n">only</span><span class="p">)</span>
</pre></div>
</div>
<p>Key values are set to None when not applicable</p>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satmo.utils.find_composite_date_list">
<code class="descclassname">satmo.utils.</code><code class="descname">find_composite_date_list</code><span class="sig-paren">(</span><em>date</em>, <em>delta</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/utils.html#find_composite_date_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.utils.find_composite_date_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Find, given a date and delta, all the dates that compose the composite to which the input date belong</p>
<p>To be used with the near real time wrapper function to find out, when a new
L3m file is produced, which composite should be created or updated.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>date</strong> (<em>datetime.datetime</em>) – Input date (probably corresponding to a newly
created L3m file (e.g.: daily composite))</li>
<li><strong>delta</strong> (<em>int</em><em> or </em><em>str</em>) – composite length in days if int, ‘month’ if str.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A list of dates (to be passed to make_time_composite)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satmo.utils.get_date_list">
<code class="descclassname">satmo.utils.</code><code class="descname">get_date_list</code><span class="sig-paren">(</span><em>file_list</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/utils.html#get_date_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.utils.get_date_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of dates covered by a list of files</p>
<p>Meant to be used within nrt_wrapper to determine generate inputs to run bin_map_wrapper</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<em>list</em>) – A list of valid (parsable with filename_parser) Ocean color filenames</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A list of datetime.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satmo.utils.is_day">
<code class="descclassname">satmo.utils.</code><code class="descname">is_day</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/utils.html#is_day"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.utils.is_day" title="Permalink to this definition">¶</a></dt>
<dd><p>Logical function to check whether a file is a night or a day file</p>
<p>Because time reported in file names are GMT times and not local
times, this function has been customized for the satmo project area
and is only valid for that area</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> (<em>str</em>) – file name of a dataset</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True if day file, False otherwise</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satmo.utils.is_night">
<code class="descclassname">satmo.utils.</code><code class="descname">is_night</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/utils.html#is_night"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.utils.is_night" title="Permalink to this definition">¶</a></dt>
<dd><p>Logical function to check whether a file is a night or a day file</p>
<p>Because time reported in file names are GMT times and not local
times, this function has been customized for the satmo project area
and is only valid for that area</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> (<em>str</em>) – file name of a dataset</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True if night file, False otherwise</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satmo.utils.path_builder">
<code class="descclassname">satmo.utils.</code><code class="descname">path_builder</code><span class="sig-paren">(</span><em>filename</em>, <em>data_root=None</em>, <em>add_file=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/utils.html#path_builder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.utils.path_builder" title="Permalink to this definition">¶</a></dt>
<dd><p>Universal path builder for Ocean color files</p>
<p>Builds a file path from its filename</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> (<em>str</em>) – syntactically correct ocean color file filename</li>
<li><strong>data_root</strong> (<em>str</em>) – OPtional root folder prepended to generated path
defaults to None</li>
<li><strong>add_file</strong> (<em>bool</em>) – append filename to generated path? Defaults to False</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">path associated to filename</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satmo.utils.path_finder">
<code class="descclassname">satmo.utils.</code><code class="descname">path_finder</code><span class="sig-paren">(</span><em>data_root</em>, <em>date</em>, <em>level</em>, <em>sensor_code=None</em>, <em>composite=None</em>, <em>anomaly=False</em>, <em>climatology=False</em>, <em>search=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/utils.html#path_finder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.utils.path_finder" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds and find existing paths from meta information</p>
<p>Builds a pseudo path name using provided metadata and runs glob.glob on it.</p>
<p>If composite or anomaly is True, you only need to provide composite and date</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data_root</strong> (<em>str</em>) – Root of the data archive</li>
<li><strong>date</strong> (<em>str</em><em> or </em><em>datetime</em>) – Date of the directory to find</li>
<li><strong>level</strong> (<em>str</em>) – Data level</li>
<li><strong>sensor_code</strong> (<em>str</em>) – Sensor of the directory to find. If None (default), is replaced by * in a glob search</li>
<li><strong>composite</strong> (<em>str</em>) – Composite period of the directory to find (only for L3m, climatologies and anomalies)</li>
<li><strong>anomaly</strong> (<em>bool</em>) – Are we looking for a directory of anomalies</li>
<li><strong>climatology</strong> (<em>bool</em>) – Are we looking for a directory of climatologies</li>
<li><strong>search</strong> (<em>bool</em>) – Should the function return the output of glob.glob() on the generated. Otherwise the glob pattern
itself is returned. Defaults to True</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A list of existing paths matching the ‘query’</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satmo.utils.pre_compose">
<code class="descclassname">satmo.utils.</code><code class="descname">pre_compose</code><span class="sig-paren">(</span><em>begin</em>, <em>end</em>, <em>delta</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/utils.html#pre_compose"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.utils.pre_compose" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare a list of list of datetime to run with a compositing function</p>
<p>Each sub list in the returned list contains the dates required to make the
composite. When delta is not a multiple of the number of day of a given
year, the last composite of the year is truncated and the next composite
starts on the first of January of the following calendar year.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>begin</strong> (<em>datetime.datetime</em>) – Begin date of the first composite</li>
<li><strong>end</strong> (<em>datetime.datetime</em>) – Begin date of the last composite</li>
<li><strong>delta</strong> (<em>int</em><em> or </em><em>str</em>) – composite length in days if int, ‘month’ if str.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A list of lists.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">satmo</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">satmo</span><span class="o">.</span><span class="n">pre_compose</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">31</span><span class="p">),</span> <span class="mi">16</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">satmo</span><span class="o">.</span><span class="n">pre_compose</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">31</span><span class="p">),</span> <span class="s1">&#39;month&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="satmo.utils.processing_meta_from_list">
<code class="descclassname">satmo.utils.</code><code class="descname">processing_meta_from_list</code><span class="sig-paren">(</span><em>file_list</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/utils.html#processing_meta_from_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.utils.processing_meta_from_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a list of filenames and returns a list of dictionaries with processing metadata</p>
<p>The function is meant to be used within satmo.wrappers.nrt_wrapper to know
which information can be generated from a list of newly downloaded files
and hence kick-off the right processing chains.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>file_list</strong> (<em>list</em>) – A list of file names parsable by filename_parser</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A list of unique dictionaries containing processing information.<p>Example of a dict (list element):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">25</span><span class="p">),</span>
 <span class="s1">&#39;products&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Rrs_412&#39;</span><span class="p">,</span>
              <span class="s1">&#39;Rrs_443&#39;</span><span class="p">,</span>
              <span class="s1">&#39;Rrs_469&#39;</span><span class="p">,</span>
              <span class="s1">&#39;Rrs_488&#39;</span><span class="p">,</span>
              <span class="s1">&#39;Rrs_531&#39;</span><span class="p">,</span>
              <span class="s1">&#39;Rrs_547&#39;</span><span class="p">,</span>
              <span class="s1">&#39;Rrs_555&#39;</span><span class="p">,</span>
              <span class="s1">&#39;Rrs_645&#39;</span><span class="p">,</span>
              <span class="s1">&#39;Rrs_667&#39;</span><span class="p">,</span>
              <span class="s1">&#39;Rrs_678&#39;</span><span class="p">,</span>
              <span class="s1">&#39;Kd_490&#39;</span><span class="p">,</span>
              <span class="s1">&#39;chl_ocx&#39;</span><span class="p">,</span>
              <span class="s1">&#39;aot_869&#39;</span><span class="p">,</span>
              <span class="s1">&#39;ipar&#39;</span><span class="p">,</span>
              <span class="s1">&#39;nflh&#39;</span><span class="p">,</span>
              <span class="s1">&#39;par&#39;</span><span class="p">,</span>
              <span class="s1">&#39;pic&#39;</span><span class="p">,</span>
              <span class="s1">&#39;poc&#39;</span><span class="p">,</span>
              <span class="s1">&#39;chlor_a&#39;</span><span class="p">],</span>
 <span class="s1">&#39;sensor&#39;</span><span class="p">:</span> <span class="s1">&#39;aqua&#39;</span><span class="p">,</span>
 <span class="s1">&#39;sensor_code&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satmo.utils.randomword">
<code class="descclassname">satmo.utils.</code><code class="descname">randomword</code><span class="sig-paren">(</span><em>length</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/utils.html#randomword"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.utils.randomword" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a random string of desired length</p>
</dd></dl>

<dl class="function">
<dt id="satmo.utils.resolution_to_km_str">
<code class="descclassname">satmo.utils.</code><code class="descname">resolution_to_km_str</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/utils.html#resolution_to_km_str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.utils.resolution_to_km_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a string with unit in km from an int (resolution in m)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<em>str</em>) – Typically a resolution in meters</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A string of the form ‘xxkm’</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satmo.utils.time_limit">
<code class="descclassname">satmo.utils.</code><code class="descname">time_limit</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/utils.html#time_limit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.utils.time_limit" title="Permalink to this definition">¶</a></dt>
<dd><p>Forces call timeout after a defined duration</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>seconds</strong> (<em>int</em>) – Timeout limit</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Use in a context manager, raises a TimeoutException when time spent within</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># the context manger exceeds specified duration in seconds</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="k">import</span> <span class="n">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">satmo</span> <span class="k">import</span> <span class="n">TimeoutException</span><span class="p">,</span> <span class="n">time_limit</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">with</span> <span class="n">time_limit</span><span class="p">(</span><span class="mi">12</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">except</span> <span class="n">TimeoutException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">pprint</span><span class="p">(</span><span class="s1">&#39;Function timed out&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="satmo.utils.to_km">
<code class="descclassname">satmo.utils.</code><code class="descname">to_km</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/utils.html#to_km"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.utils.to_km" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert distance string to its km equivalent</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<em>str</em>) – A distance (resolution) string with unit (e.g.: ‘1000m’)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A string of the form ‘xxkm’</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satmo.utils.viirs_geo_filename_builder">
<code class="descclassname">satmo.utils.</code><code class="descname">viirs_geo_filename_builder</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/satmo/utils.html#viirs_geo_filename_builder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#satmo.utils.viirs_geo_filename_builder" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds the viirs geo filename corresponding to a L1A file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<em>str</em>) – L1A viirs filename</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A viirs geo filename</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="satmo.download.html" class="btn btn-neutral float-right" title="satmo.download module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="satmo package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, CONABIO.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.2.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>