

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using the command line interface &mdash; satmo 0.2.4 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="satmo 0.2.4 documentation" href="index.html"/>
        <link rel="next" title="Adjusting default processing parameters and variables" href="variables.html"/>
        <link rel="prev" title="Background" href="introduction.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> satmo
          

          
          </a>

          
            
            
              <div class="version">
                0.2.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#characteristics-of-the-satmo-system">Characteristics of the SATMO system</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#satmo-operating-modes">Satmo operating modes</a></li>
</ul>
<p class="caption"><span class="caption-text">User guide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using the command line interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#before-starting">Before starting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#starting-satmo-near-real-time-mode">Starting satmo near real time mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="#update-mode">Update mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="#downloading-data">Downloading data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#examples-usage">Examples usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#processing-l2-data-from-l1a">Processing L2 data from L1A</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Examples usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#generating-additional-l2-variables">Generating additional L2 variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Examples usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#generating-mapped-l2-variables">Generating mapped L2 variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">Examples usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#generating-mapped-l3m-variables">Generating mapped L3m variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id4">Examples usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#generating-temporal-composites">Generating temporal composites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">Examples usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-visualization">Data visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#combinining-command-lines">Combinining command lines</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="variables.html">Adjusting default processing parameters and variables</a></li>
</ul>
<p class="caption"><span class="caption-text">Technical documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/index.html">satmo API</a></li>
<li class="toctree-l1"><a class="reference internal" href="conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="chains.html">Satmo processing chains</a></li>
</ul>
<p class="caption"><span class="caption-text">Installation and documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="autodoc.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="autodoc.html#building-the-doc">Building the doc</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">satmo</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Using the command line interface</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/cli.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-the-command-line-interface">
<h1>Using the command line interface<a class="headerlink" href="#using-the-command-line-interface" title="Permalink to this headline">¶</a></h1>
<p>Operation of the two different modes (near real time and update modes) is done via a set of command line, which are detailed below. Every command lines have a consistent syntax and naming convention.</p>
<p>Every command line contains built in documentation that can be accessed by running <code class="docutils literal"><span class="pre">name_of_the_cli.py</span> <span class="pre">--help</span></code>.</p>
<p>Because most of the commands runs for several hours or even days, it is preferable to run them within a <code class="docutils literal"><span class="pre">nohup</span></code> context. See the example below.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Run a command as a background process (allowing you to close the terminal), and writing the verbose to a log file</span>
nohup command_name.py --arg1 input1 --arg2 input2 &gt; ~/YYYYMMDD_processing_log.log <span class="p">&amp;</span>
</pre></div>
</div>
<div class="section" id="before-starting">
<h2>Before starting<a class="headerlink" href="#before-starting" title="Permalink to this headline">¶</a></h2>
<p>As detailed in the installation section, it is recommended to have installed the satmo package in a python virtual environment. Considering, you have already created a virtual environment named <code class="docutils literal"><span class="pre">satmo</span></code>, you have to activate that environment to be able to run a satmo command line. To activate the environment, simply run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>workon satmo
</pre></div>
</div>
</div>
<div class="section" id="starting-satmo-near-real-time-mode">
<h2>Starting satmo near real time mode<a class="headerlink" href="#starting-satmo-near-real-time-mode" title="Permalink to this headline">¶</a></h2>
<p>As detailed in the installation instruction, you probably want to start the near real time operation mode automatically as soon as the system boots up, and for that you should add and entry to the linux user crontab. However, it is of course also possible to start satmo near real time mode manually, using the <code class="docutils literal"><span class="pre">satmo_nrt.py</span></code> command.</p>
<p>Running <code class="docutils literal"><span class="pre">satmo_nrt.py</span> <span class="pre">--help</span></code> returns the following help page.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>usage: satmo_nrt.py <span class="o">[</span>-h<span class="o">]</span> -day_vars <span class="o">[</span>DAY_VARS <span class="o">[</span>DAY_VARS ...<span class="o">]]</span> -night_vars
                    <span class="o">[</span>NIGHT_VARS <span class="o">[</span>NIGHT_VARS ...<span class="o">]]</span>
                    <span class="o">[</span>-l1a_vars <span class="o">[</span>L1A_VARS <span class="o">[</span>L1A_VARS ...<span class="o">]]]</span> <span class="o">[</span>--no-refined<span class="o">]</span>
                    <span class="o">[</span>--no-8DAY<span class="o">]</span> <span class="o">[</span>--no-month<span class="o">]</span> -d DATA_ROOT
                    <span class="o">[</span>-map_res MAPPING_RESOLUTION<span class="o">]</span>
                    <span class="o">[</span>-bin_res BINNING_RESOLUTION<span class="o">]</span> -north NORTH -south SOUTH
                    -east EAST -west WEST <span class="o">[</span>-p PROJ<span class="o">]</span>
                    <span class="o">[</span>-flags <span class="o">[</span>FLAGS <span class="o">[</span>FLAGS ...<span class="o">]]]</span> <span class="o">[</span>-delay DELAY<span class="o">]</span>
                    <span class="o">[</span>-multi N_THREADS<span class="o">]</span>

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -day_vars <span class="o">[</span>DAY_VARS <span class="o">[</span>DAY_VARS ...<span class="o">]]</span>, --day_vars <span class="o">[</span>DAY_VARS <span class="o">[</span>DAY_VARS ...<span class="o">]]</span>
                        day <span class="nb">time</span> variables to process
  -night_vars <span class="o">[</span>NIGHT_VARS <span class="o">[</span>NIGHT_VARS ...<span class="o">]]</span>, --night_vars <span class="o">[</span>NIGHT_VARS <span class="o">[</span>NIGHT_VARS ...<span class="o">]]</span>
                        night <span class="nb">time</span> variables to process
  -l1a_vars <span class="o">[</span>L1A_VARS <span class="o">[</span>L1A_VARS ...<span class="o">]]</span>, --l1a_vars <span class="o">[</span>L1A_VARS <span class="o">[</span>L1A_VARS ...<span class="o">]]</span>
                        Additional L2 variables to process from OC2 collection
                        <span class="o">(</span>generated from L1A files<span class="o">)</span>
  --no-refined          Disable download of refined processed L2 data,
                        reprocessing of L2 data from L1A, and L3m processing
                        from them
  --no-8DAY             Disable processing of <span class="m">8</span> days temporal composites
  --no-month            Disable processing of monthly temporal composites
  -d DATA_ROOT, --data_root DATA_ROOT
                        Root of the <span class="nb">local</span> archive
  -map_res MAPPING_RESOLUTION, --mapping_resolution MAPPING_RESOLUTION
                        Output resolution in meters <span class="o">(</span>defaults to <span class="m">1000</span><span class="o">)</span>
  -bin_res BINNING_RESOLUTION, --binning_resolution BINNING_RESOLUTION
                        Output resolution in meters <span class="o">(</span>defaults to <span class="m">1000</span><span class="o">)</span>
  -north NORTH, --north NORTH
                        Northern boundary in DD
  -south SOUTH, --south SOUTH
                        Southern boundary in DD
  -east EAST, --east EAST
                        Eastern most boundary in DD
  -west WEST, --west WEST
                        Western most boundary in DD
  -p PROJ, --proj PROJ  Optional Coordinate reference system of the output in
                        proj4 format, or any predifined crs name in seadas
                        l3mapgen. If None is provided, +proj<span class="o">=</span>eqc +lon_0<span class="o">=</span><span class="m">0</span> is
                        used
  -flags <span class="o">[</span>FLAGS <span class="o">[</span>FLAGS ...<span class="o">]]</span>, --flags <span class="o">[</span>FLAGS <span class="o">[</span>FLAGS ...<span class="o">]]</span>
                        List of flags to use in the binning step. If not
                        provided defaults are retrieved <span class="k">for</span> each L3 suite
                        independently from the satmo global variable FLAGS
  -delay DELAY, --delay DELAY
                        NUmber of days to <span class="nb">wait</span> before triggering refined
                        reprocessing of the L2 OC2 suite from L1A
  -multi N_THREADS, --n_threads N_THREADS
                        Number of threads to use <span class="k">for</span> parallel implementation

Command Line utility to control the operational mode of the satmo system. Enables download of L2 and <span class="o">(</span>day only<span class="o">)</span> L1A data from OBPG server <span class="o">(</span>NRT and refined processing<span class="o">)</span>,
processing of L3m and L2m files <span class="k">for</span> several night and day variables, processing of daily composites, and processing of temporal composites. All these download and processing steps
are scheduled and ran operationally. Temporal composites are enabled by default. Use the --no-daily_compose, and --no-8DAYto disable their generation.

The L2 suite generated from L1A data by this <span class="nb">command</span> line is named OC2, and contains a list of variables defined in the global variable VARS_FROM_L2_SUITE. Additional variables can be
appended to the OC2 suite by passing them to --l1a_vars <span class="o">(</span>these variable must have an entry in the BAND_MATH_FUNCTIONS satmo global variable<span class="o">)</span>. At the moment the OC2 suite is only
used <span class="k">for</span> fai and afai generation, and therefore only processed up to level 2m <span class="o">(</span>L2m<span class="o">)</span>.

------------------
Example usage:
------------------
satmo_nrt.py --day_vars chlor_a nflh sst Kd_490 --night_vars sst --l1a_vars afai fai --north <span class="m">33</span> --south <span class="m">3</span> --west -122 --east -72 -d /export/isilon/datos2/satmo2_data/ -multi <span class="m">3</span>
</pre></div>
</div>
</div>
<div class="section" id="update-mode">
<h2>Update mode<a class="headerlink" href="#update-mode" title="Permalink to this headline">¶</a></h2>
<p>Update mode is used primarilly to download and process archive data. All command start by the prefix <code class="docutils literal"><span class="pre">timerange</span></code>, indicating that their action apply to a range of dates defined by a <code class="docutils literal"><span class="pre">--begin</span></code> and <code class="docutils literal"><span class="pre">--end</span></code> argument. The full list of functions is presented in the table below.</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="44%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">CLI name</th>
<th class="head">description</th>
<th class="head">Should be ran after</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">timerange_download.py</span></code></td>
<td>Downloads data from the OBPG servers to a local archive</td>
<td>None</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">timerange_L2_process.py</span></code></td>
<td>Generates L2 products from L1A</td>
<td><code class="docutils literal"><span class="pre">timerange_download.py</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">timerange_L2_append.py</span></code></td>
<td>Computes additional variables and appends the result to an existing L2 file</td>
<td><code class="docutils literal"><span class="pre">timerange_L2_process.py</span></code> or <code class="docutils literal"><span class="pre">timerange_download.py</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">timerange_L2m_process.py</span></code></td>
<td>Maps L2 product variables to a plattecarre projection</td>
<td><code class="docutils literal"><span class="pre">timerange_L2_process.py</span></code> or <code class="docutils literal"><span class="pre">timerange_download.py</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">timerange_bin_map.py</span></code></td>
<td>Performs spatial binning and mapping of a variable across multiple L2 files</td>
<td><code class="docutils literal"><span class="pre">timerange_L2_process.py</span></code> or <code class="docutils literal"><span class="pre">timerange_download.py</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">timerange_time_compositing.py</span></code></td>
<td>Perform temporal binning and mapping of a variable</td>
<td><code class="docutils literal"><span class="pre">timerange_bin_map.py</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">timerange_daily_composite.py</span></code></td>
<td>Average L3m products across different sensors</td>
<td><code class="docutils literal"><span class="pre">timerange_bin_map.py</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">make_preview.py</span></code></td>
<td>Generate png preview of a L3m file</td>
<td><code class="docutils literal"><span class="pre">timerange_bin_map.py</span></code> or <code class="docutils literal"><span class="pre">timerange_time_compositing.py</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="downloading-data">
<h2>Downloading data<a class="headerlink" href="#downloading-data" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">timerange_download.py</span></code> command line can be used to download data from the OBPG servers to a local archive. It supports downloading L1A as well as L2 files, with the option to select the suite in case of L2 download, and to choose between night or day data. Running <code class="docutils literal"><span class="pre">timerange_download.py</span> <span class="pre">--help</span></code> displays the help page of the command line interface.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Downloading data for a long period without speed restriction may cause problems of breaking connection, and is not permitted during office hours at CONABIO. It is therefore preferable to limit download speed with tools like <strong>trickle</strong>. See example below.</p>
</div>
<p>The example below illustrates a download process (L1A data) with speed limited to 3MBps.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Download L1A data with speed limited to 3 MB/s</span>
nohup trickle -d <span class="m">3000</span> timerange_download.py --terra --aqua -b <span class="m">2010</span>-01-01 -e <span class="m">2012</span>-12-31 -north <span class="m">32</span> -south <span class="m">4</span> -west -121 -east -73 -d /some/directory/with/free/space &gt; YYYYMMDD_download_log.log <span class="p">&amp;</span>
</pre></div>
</div>
<div class="section" id="examples-usage">
<h3>Examples usage<a class="headerlink" href="#examples-usage" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>L1A data download</li>
</ul>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> nohup timerange_download.py --terra --aqua --viirs -b <span class="m">2000</span>-02-24 -e <span class="m">2016</span>-12-31 -north <span class="m">32</span> -south <span class="m">4</span> -west -121 -east -73 -d /export/isilon/datos2/satmo2_data/ &gt; ~/dl_log.log <span class="p">&amp;</span>
</pre></div>
</div>
<ul class="simple">
<li>L2 data download</li>
</ul>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> Ocean color variables <span class="o">(</span>Blue reflectances, chlor<span class="se">\_</span>a, etc<span class="o">)</span>
<span class="go">nohup timerange_download.py --terra --aqua --viirs -b 2000-02-24 -e 2016-12-31 -north 32 -south 4 -west -121 -east -73 -p OC --no-night -d /export/isilon/datos2/satmo2_data/ &gt; ~/dl_log.log &amp;</span>

<span class="gp">#</span> Day <span class="nb">time</span> SST
<span class="go">nohup timerange_download.py --terra --aqua --viirs -b 2000-02-24 -e 2016-12-31 -north 32 -south 4 -west -121 -east -73 -p SST --no-night -d /export/isilon/datos2/satmo2_data/ &gt; ~/dl_log.log &amp;</span>

<span class="gp">#</span> Night <span class="nb">time</span> SST
<span class="go">nohup timerange_download.py --terra --aqua --viirs -b 2000-02-24 -e 2016-12-31 -north 32 -south 4 -west -121 -east -73 -p SST --no-day -d /export/isilon/datos2/satmo2_data/ &gt; ~/dl_log.log &amp;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="processing-l2-data-from-l1a">
<h2>Processing L2 data from L1A<a class="headerlink" href="#processing-l2-data-from-l1a" title="Permalink to this headline">¶</a></h2>
<p>The command line <code class="docutils literal"><span class="pre">timerange_L2_process.py</span></code> processes L2 files from L1A. The command line is a wrapper (and batcher) around the seadas utility <code class="docutils literal"><span class="pre">l2gen</span></code>. The figure below details the processing chain triggered by the command line.</p>
<img alt="_images/l2gen_flowchart.png" src="_images/l2gen_flowchart.png" />
<div class="section" id="id1">
<h3>Examples usage<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Process a L2 suite called OC2 that contains Rayleight corrected reflectances</span>
timerange_L2_process.py --aqua --terra --viirs -b <span class="m">2014</span>-01-01 -e <span class="m">2014</span>-12-31 -v rhos_nnn -s OC2 -d /export/isilon/data2/satmo2_data -multi <span class="m">3</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="generating-additional-l2-variables">
<h2>Generating additional L2 variables<a class="headerlink" href="#generating-additional-l2-variables" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">timerange_L2_append.py</span></code> command line enables computing additional variables from bands present in an L2 file. The new index/band layer is appended to the L2 file from which the input were taken.</p>
<p>The list of variables that can be processed using that command line can be found in <code class="docutils literal"><span class="pre">satmo.global_variables.BAND_MATH_FUNCTIONS</span></code>. Edit that variable in the satmo source code following the existing model to enable processing of additional variables.</p>
<div class="section" id="id2">
<h3>Examples usage<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Process afai and append it to the OC2 L2 suite generated by the command above</span>
timerange_L2_append.py --aqua --terra --viirs -b <span class="m">2014</span>-01-01 -e <span class="m">2014</span>-12-31 -v afai -s OC2 -d /export/isilon/data2/satmo2_data -multi <span class="m">3</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="generating-mapped-l2-variables">
<h2>Generating mapped L2 variables<a class="headerlink" href="#generating-mapped-l2-variables" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">timerange_L2m_process.py</span></code> runs seadas <code class="docutils literal"><span class="pre">l2mapgen</span></code> on individual L2 file, to produced mapped products.</p>
<div class="section" id="id3">
<h3>Examples usage<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Process afai and append it to the OC2 L2 suite generated by the command above</span>
timerange_L2_append.py --aqua --terra --viirs -b <span class="m">2014</span>-01-01 -e <span class="m">2014</span>-12-31 -v afai -s OC2 -d /export/isilon/data2/satmo2_data -multi <span class="m">3</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="generating-mapped-l3m-variables">
<h2>Generating mapped L3m variables<a class="headerlink" href="#generating-mapped-l3m-variables" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">timerange_bin_map.py</span></code> runs seadas <code class="docutils literal"><span class="pre">l2bin</span></code> and <code class="docutils literal"><span class="pre">l3mapgen</span></code> sequentially, hence producing L3m products. It also produces L3b files (one for each collection), which are intermediary output in that case, but required inputs for the temporal compositing command line (<code class="docutils literal"><span class="pre">timerange_time_compositing.py</span></code>).</p>
<p>The <code class="docutils literal"><span class="pre">l2bin</span></code> utility uses default masking values fetched from a global variable named <code class="docutils literal"><span class="pre">FLAGS</span></code> and located at <code class="docutils literal"><span class="pre">satmo.global_variables</span></code>. Edit this variable to change the default values.</p>
<div class="section" id="id4">
<h3>Examples usage<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Process chlor_a, night sst, sst, and chl_ocx for viirs, aqua and terra between 2000 and 2017</span>
timerange_bin_map.py --aqua --terra --viirs -b <span class="m">2000</span>-01-01 -e <span class="m">2017</span>-12-31 -south <span class="m">3</span> -north <span class="m">33</span> -west -122 -east -72 -d /export/isilon/datos2/satmo2_data -bin_res <span class="m">1</span> -map_res <span class="m">1000</span> -day_vars chlor_a chl_ocx sst -night_vars sst -multi <span class="m">6</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="generating-temporal-composites">
<h2>Generating temporal composites<a class="headerlink" href="#generating-temporal-composites" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">timerange_time_compositing.py</span></code> runs seadas <code class="docutils literal"><span class="pre">l3bin</span></code> and <code class="docutils literal"><span class="pre">l3mapgen</span></code> sequentially, hence producing mapped temporal composites.</p>
<div class="section" id="id5">
<h3>Examples usage<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Generate 8 days composites for aqua, viirs and terra for the period 2000-2017 (for chlor_a, chl_ocx, sst and night sst)</span>
timerange_time_compositing.py --aqua --terra --viirs -b <span class="m">2000</span>-01-01 -e <span class="m">2017</span>-12-31 -delta <span class="m">8</span> -day_vars chlor_a chl_ocx sst -night_vars sst -north <span class="m">33</span> -south <span class="m">3</span> -west -122 -east -72 -d /export/isilon/datos2/satmo2_data
</pre></div>
</div>
</div>
</div>
<div class="section" id="data-visualization">
<h2>Data visualization<a class="headerlink" href="#data-visualization" title="Permalink to this headline">¶</a></h2>
<p>Satmo comes with a command line for generating preview of existing georeferenced tiff files. It produces png files, with continents and coastlines, and supports linear as well as logarithmic scaling of the variable. Variables have to be referenced in the global variable <code class="docutils literal"><span class="pre">VIZ_PARAMS</span></code>, located at <code class="docutils literal"><span class="pre">satmo.global_variables</span></code>. Do not set <code class="docutils literal"><span class="pre">vmin</span></code> to zero for a log scaled variable since the logarithm of zero is not defined.</p>
<p>The example below produces the figure at the end of this page.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>make_preview.py A2006001.L3m_MO_CHL_chlor_a_1km.tif
make_preview.py A2006001.L3m_MO_SST_sst_1km.tif
</pre></div>
</div>
<img alt="_images/A2006001.L3m_MO_CHL_chlor_a_1km.png" src="_images/A2006001.L3m_MO_CHL_chlor_a_1km.png" />
<img alt="_images/A2006001.L3m_MO_SST_sst_1km.png" src="_images/A2006001.L3m_MO_SST_sst_1km.png" />
</div>
<div class="section" id="combinining-command-lines">
<h2>Combinining command lines<a class="headerlink" href="#combinining-command-lines" title="Permalink to this headline">¶</a></h2>
<p>It is possible to combine various steps of the processing by adding the individual command to a bash script, and runnning the script. Such example of script is available <a class="reference external" href="https://github.com/CONABIO/satmo/blob/master/scripts/2017-09-28_data_processing_example.py">here</a> (also pasted below). This particular example processes, from L2, for the year 2015, five variables (chlor_a nflh Kd_490 sst nsst) to level 3, including 8 days composites and monthly composites.</p>
<p>The different steps to run such script are to:</p>
<ul class="simple">
<li>Save the script not forgetting the bash shebang</li>
<li>Make the script executable</li>
<li>Run the script with a command like <code class="docutils literal"><span class="pre">nohup</span> <span class="pre">./script_name.sh</span> <span class="pre">&gt;</span> <span class="pre">~/YYYYMMDD_processing_log.log</span> <span class="pre">&amp;</span></code></li>
</ul>
<p>Example script combinining multiple command lines.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env bash</span>

<span class="c1"># Process standard variables from L2 for the 3 sensors for the year 2015</span>
timerange_bin_map.py --aqua --terra --viirs -b <span class="m">2015</span>-01-01 -e <span class="m">2015</span>-12-31 -south <span class="m">3</span> -north <span class="m">33</span> -west -122 -east -72 -d /export/isilon/datos2/satmo2_data -day_vars chlor_a nflh Kd_490 sst -night_vars sst -multi <span class="m">6</span>

<span class="c1"># Generate 8 days composites for aqua, viirs and terra for the same variables and the year 2015</span>
timerange_time_compositing.py --aqua --terra --viirs -b <span class="m">2015</span>-01-01 -e <span class="m">2015</span>-12-31 -delta <span class="m">8</span> -day_vars chlor_a nflh Kd_490 sst -night_vars sst -north <span class="m">33</span> -south <span class="m">3</span> -west -122 -east -72 -d /export/isilon/datos2/satmo2_data -multi <span class="m">6</span>

<span class="c1"># Generate monthly composites for aqua, viirs and terra for the period 2000-2017 (for chlor_a, chl_ocx, sst and night sst)</span>
timerange_time_compositing.py --aqua --terra --viirs -b <span class="m">2015</span>-01-01 -e <span class="m">2015</span>-12-31 -delta month -day_vars chlor_a nflh Kd_490 sst -night_vars sst -north <span class="m">33</span> -south <span class="m">3</span> -west -122 -east -72 -d /export/isilon/datos2/satmo2_data -multi <span class="m">6</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="variables.html" class="btn btn-neutral float-right" title="Adjusting default processing parameters and variables" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral" title="Background" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, CONABIO.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.2.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>